(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{105:function(e,t,c){},132:function(e,t,c){"use strict";c.r(t);var a=c(0),s=c(12),n=c.n(s),r=(c(105),c(35)),i=c(36),o=c(44),l=c(43),d=c(13),j=c(8),u=c(175),b=c(37),h=c(41),O="LOGIN",m="SIGNUP",p="GET_USERINFO",f="GET_USERPORTFOLIO",x="GET_PORTFOINTRA",v=c(18),g=c.n(v),N=c(6),k=c(136),y=c(134),w=c(91),S=c(170),C=Object(S.a)((function(e){return{paper:{position:"absolute",width:"90%",height:"60%",backgroundColor:e.palette.background.paper,borderRadius:"5px",boxShadow:e.shadows[5],padding:e.spacing(2,4,3),top:"40%",left:"50%",transform:"translate(-50%, -50%)"}}})),I=Object(S.a)((function(e){return{paper:{width:"100%",position:"absolute",backgroundColor:e.palette.background.paper,borderRadius:"5px",top:"0px",left:"0px",transform:"translate(-50%, -50%)"}}})),P=Object(S.a)((function(e){return{root:{width:"100%",padding:"0.5rem"}}})),A=Object(S.a)({input:{padding:"1rem 0px",height:"40px"},root:{width:"100%"},label:{fontSize:"14px",fontStyle:"italic"}}),F=c(184),E=c(1),T=["TSLA","AAPL","AMZN","SQ","NIO","NKE","GOOG"];function _(e){var t=e.stock,c=e.saveHistory,a=t.companyName.length>30?t.companyName.slice(0,30)+"...":t.companyName;return Object(E.jsx)("div",{className:"search-result",children:Object(E.jsxs)("a",{onClick:function(e){c(e)},href:"/viewstock/"+t.ticker,children:[" ",t.ticker," - ",a]})})}var M=function(){var e=[{_id:"nothing"}],t=Object(a.useState)(""),c=Object(N.a)(t,2),s=c[0],n=c[1],r=Object(a.useState)([]),i=Object(N.a)(r,2),o=i[0],l=i[1],d=Object(a.useState)([]),j=Object(N.a)(d,2),u=j[0],b=j[1],h=Object(a.useState)(!1),O=Object(N.a)(h,2),m=O[0],p=O[1],f=Object(a.useState)(""),x=Object(N.a)(f,2),v=x[0],S=x[1],I=A(),P=C(),M=localStorage.getItem("ticker")?localStorage.getItem("ticker").split("/ "):"",R=function(e){var t=localStorage.getItem("ticker");t?t.includes(e.target.textContent)?localStorage.setItem("ticker",t):localStorage.setItem("ticker","".concat(t,"/").concat(e.target.textContent)):localStorage.setItem("ticker",e.target.textContent)},D=function(){localStorage.removeItem("ticker"),S("")};Object(a.useEffect)((function(){S(M),g.a.post("/stockApi/search-ticker",{query:s}).then((function(t){"object"===typeof t.data?l(t.data):l(e)})).catch((function(e){return console.error(e)}))}),[s]),Object(a.useEffect)((function(){g.a.post("/stockApi/getTrendingStocks",T).then((function(e){b(e.data)})).catch((function(e){return console.error(e)}))}),[]);var L=Object(E.jsxs)("div",{className:P.paper,id:"search-modal",children:[Object(E.jsx)("div",{className:"search-heading",children:"search for stock"}),Object(E.jsx)(F.a,{InputProps:{className:I.input},className:I.root,value:s,onChange:function(e){n(e.target.value)},id:"ticker-search",autoComplete:"off",autoFocus:!0,variant:"outlined"}),Object(E.jsx)("div",{id:"found-stock_history-container",children:o&&o.map((function(e){return e.ticker?Object(E.jsx)(_,{saveHistory:R,stock:e},e._id):v?Object(E.jsxs)("div",{id:"history",children:[Object(E.jsx)("button",{className:"history_trending",id:"clear-history-btn",onClick:D,children:"clear history"}),v.map((function(e){var t=e.split(" - ");return Object(E.jsx)("div",{className:"search-result",children:Object(E.jsx)("a",{href:"/viewstock/".concat(t[0].trim()),className:"history",children:e})},t)}))]}):Object(E.jsxs)("div",{id:"trending-stocks",children:[Object(E.jsx)("button",{className:"history_trending",children:"trending stocks..."}),u&&u.map((function(e){return Object(E.jsx)(_,{saveHistory:R,stock:e},e._id)}))]})}))})]});return Object(E.jsxs)("div",{id:"search",children:[Object(E.jsx)("button",{id:"search-button",type:"button",style:{border:"none",background:"none"},onClick:function(){p(!0)},children:Object(E.jsx)("i",{className:"fas fa-search"})}),Object(E.jsx)(k.a,{open:m,onClose:function(){p(!1),n("")},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",closeAfterTransition:!0,BackdropComponent:y.a,BackdropProps:{timeout:250},children:Object(E.jsx)(w.a,{in:m,children:L})})]})};var R,D,L=function(){return Object(E.jsxs)("nav",{id:"nav-bar",children:[Object(E.jsx)(d.b,{to:"/",className:"nav-link",children:Object(E.jsx)("i",{className:"fas fa-dice-five"})}),Object(E.jsx)(d.b,{to:"/watchlist",className:"nav-link",children:Object(E.jsx)("i",{className:"fas fa-star"})}),Object(E.jsx)(M,{}),Object(E.jsx)(d.b,{to:"/account",className:"nav-link",children:Object(E.jsx)("i",{className:"fas fa-bars"})})]})},$=function(e){Object(o.a)(c,e);var t=Object(l.a)(c);function c(){var e;Object(r.a)(this,c);for(var a=arguments.length,s=new Array(a),n=0;n<a;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))).state={username:"",password:""},e.handleChange=function(t){e.setState(Object(b.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.login(e.state),e.setState({username:"",password:""}),document.getElementById("login-form").reset()},e}return Object(i.a)(c,[{key:"render",value:function(){return Object(E.jsxs)("div",{id:"login-page",children:[Object(E.jsxs)("div",{id:"main-wrapper",children:[Object(E.jsx)("div",{id:"square",children:Object(E.jsx)("div",{id:"square-text",children:"Inveseria."})}),Object(E.jsx)("div",{id:"google-link",children:Object(E.jsxs)("a",{href:"/auth/google",className:"col s4 offset-s4 btn btn-danger",children:[Object(E.jsx)("span",{className:"fa fa-google"})," Sign In with Google"]})}),Object(E.jsx)("div",{id:"github-link",children:Object(E.jsxs)("a",{href:"/auth/github",className:"col s4 offset-s4 btn btn-danger",children:[Object(E.jsx)("span",{className:"fab fa-github"})," Sign In with Github"]})}),Object(E.jsx)("div",{id:"anonymous-link",children:Object(E.jsxs)("a",{href:"/auth/anonymous",className:"col s4 offset-s4 btn btn-danger",children:[Object(E.jsx)("span",{class:"fas fa-mask"})," Sign In Anonymously"]})})]}),Object(E.jsx)(L,{})]})}}]),c}(a.Component),B=Object(u.a)(Object(h.b)((function(e,t){return{userInfo:e.userReducer.user,cookies:t.cookies}}),(function(e){return{login:function(t){e(function(e){return function(t,c){g.a.post("/auth/login",e).then((function(e){return t({type:O,user:e})})).catch((function(e){return console.error(e)}))}}(t))}}}))($)),W=function(e){Object(o.a)(c,e);var t=Object(l.a)(c);function c(){var e;Object(r.a)(this,c);for(var a=arguments.length,s=new Array(a),n=0;n<a;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))).state={username:"",password:"",email:""},e.handleChange=function(t){e.setState(Object(b.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.signup(e.state),e.setState({username:"",password:"",email:""}),document.getElementById("signup-form").reset()},e}return Object(i.a)(c,[{key:"render",value:function(){console.log(this.props);var e=this.props.message;return Object(E.jsxs)("div",{id:"signup-page",children:[Object(E.jsxs)("form",{id:"signup-form",onSubmit:this.handleSubmit,className:"row",children:[Object(E.jsxs)("div",{className:"input-field col s4 offset-s4",children:[Object(E.jsx)("input",{id:"username",type:"text",onChange:this.handleChange}),Object(E.jsx)("label",{htmlFor:"username",children:"Username"})]}),Object(E.jsxs)("div",{className:"input-field col s4 offset-s4",children:[Object(E.jsx)("input",{id:"email",type:"text",onChange:this.handleChange}),Object(E.jsx)("label",{htmlFor:"email",children:"Email"})]}),Object(E.jsxs)("div",{className:"input-field col s4 offset-s4",children:[Object(E.jsx)("input",{id:"password",type:"text",onChange:this.handleChange}),Object(E.jsx)("label",{htmlFor:"password",children:"Password"})]}),Object(E.jsx)("button",{className:"btn col s4 offset-s4 red darken-2",children:"Sign up!"}),Object(E.jsx)(d.c,{to:"/login",children:Object(E.jsx)("button",{className:"btn col s4 offset-s4 green darken-2",children:"Log In"})}),Object(E.jsx)("div",{className:"col s5 offset-s1",children:e.data})]}),Object(E.jsx)(L,{})]})}}]),c}(a.Component),G=Object(h.b)((function(e){return{message:e.userReducer.message,user:e.userReducer.user}}),(function(e){return{signup:function(t){e(function(e){return function(t,c){g.a.post("/auth/signup",e).then((function(e){t({type:m,message:e})})).catch((function(e){console.error(e)}))}}(t))}}}))(W),z=c(71),H=c.n(z),U=c(85),V=c(60),Y=document.cookie.split(";");R=Y.length>1?5:4;var q,J=Object(V.a)(Y);try{for(J.s();!(q=J.n()).done;){var K=q.value;K.includes("jwt=")&&(D=K.slice(R))}}catch(et){J.e(et)}finally{J.f()}var Q=g.a.create();Q.interceptors.request.use((function(e){var t=D;return t&&(e.headers.Authorization="Bearer "+t),e}),(function(e){Promise.reject(e)})),Q.interceptors.response.use((function(e){return e}),(function(e){401!==e.response.status&&400!==e.response.status||(window.location="/login")}));var Z=Q,X=Object(u.a)((function(e){var t=localStorage.getItem("lastPath"),c=Object(a.useState)([]),s=Object(N.a)(c,2),n=s[0],r=s[1];return Object(a.useEffect)(Object(U.a)(H.a.mark((function e(){var t,c;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.get("/stockApi/getAllTransactions");case 2:c=e.sent,t=c.data,r(t);case 5:case"end":return e.stop()}}),e)}))),[]),Object(E.jsxs)("div",{id:"transactions",children:[Object(E.jsxs)("div",{className:"heading",children:[Object(E.jsx)(d.b,{to:t,className:"back-btn",children:Object(E.jsx)("i",{className:"fas fa-chevron-circle-left"})}),Object(E.jsx)("div",{className:"header",children:"All Transactions"}),Object(E.jsx)("div",{className:"dummy"})]}),n&&n.map((function(e){return Object(E.jsxs)("div",{className:"day-transaction",children:[Object(E.jsxs)("div",{className:"date",children:[" ",e._id.split("-").reverse().join("-")]}),e.transaction.map((function(e){var t="buy"===e.action?"green":"red",c="buy"===e.action?Object(E.jsx)("i",{className:"fas fa-plus"}):Object(E.jsx)("i",{className:"fas fa-minus"});return Object(E.jsxs)("div",{className:"transaction",children:[Object(E.jsxs)("div",{className:"wrapper",children:[Object(E.jsx)("div",{className:"".concat(t," action"),children:c}),Object(E.jsxs)("div",{className:"info-wrapper",children:[Object(E.jsx)("div",{className:"numOfShares",children:e.numOfShares}),Object(E.jsx)("div",{className:"ticker",children:e.ticker}),Object(E.jsxs)("div",{className:"price",children:["@",e.price]})]})]}),Object(E.jsx)("div",{className:"lower-wrapper",children:Object(E.jsx)("div",{className:"time",children:e.createdAt.slice(11,19)})})]},e._id)}))]},e._id)}))]})}));var ee=function(e){var t=e.userInfo;return Object(E.jsxs)(d.b,{to:"/account",id:"user-info",children:[Object(E.jsx)("img",{className:"user-picture",src:t&&t.picture,alt:"Inveseria user"}),Object(E.jsx)("div",{className:"username",children:t&&t.username})]})};var te=function(e){var t=e.cash,c=e.total;return Object(E.jsxs)("div",{id:"account",children:[Object(E.jsxs)("div",{id:"balance",children:["Portfolio:",Object(E.jsxs)("span",{className:"amount",children:[" $ ",c&&(parseFloat(c.toFixed(2))+parseFloat(t)).toFixed(2)]})]}),Object(E.jsxs)("div",{id:"cash",children:["Cash: ",Object(E.jsxs)("span",{className:"amount",children:["$",t&&t.toFixed(2)]})]})]})},ce=function(e){var t=e.component;return Object(E.jsxs)("div",{id:"empty",children:["Your ",t," is empty, find a stock, do research and start investing with Inveseria!"]})};var ae=function(e){var t=e.userPortfolio,c=e.cash,s=Object(a.useState)({randomNumber:0,totalAcc:0}),n=Object(N.a)(s,2),r=n[0],i=n[1];Object(a.useEffect)((function(){var e=setInterval((function(){var e=Math.floor(99*Math.random()),c=0;t.forEach((function(t){c+=t.tickerValue[0].intraday[e].open*t.numOfShares})),i({randomNumber:e,totalAcc:c})}),1500);return console.log(t.length),function(){clearInterval(e)}}),[]);var o=r.randomNumber,l=r.totalAcc;return Object(E.jsxs)("div",{id:"portfolio-account-wrapper",children:[Object(E.jsx)(te,{total:l,cash:c}),0===(null===t||void 0===t?void 0:t.length)?Object(E.jsx)(ce,{component:"Portfolio"}):Object(E.jsx)("div",{id:"portfolio",children:null===t||void 0===t?void 0:t.map((function(e){var t=e.tickerValue[0].intraday[o].close.toFixed(1),c=e.tickerValue[0].intraday[o].open.toFixed(1),a=((t-c)/c*100).toFixed(2);a=a<=0?-Math.random().toFixed(2):a;var s=((c-e.avgPrice)/e.avgPrice*100).toFixed(2),n=a>=0?"green":"red";return Object(E.jsxs)(d.b,{to:"/viewstock/".concat(e.ticker),className:"ticker-info",children:[Object(E.jsxs)("div",{className:"logo-symbol-wrapper",children:[Object(E.jsx)("img",{className:"logo",src:e.tickerValue[0].logo,alt:""}),Object(E.jsxs)("div",{className:"symbol-name-wrapper",children:[Object(E.jsx)("div",{className:"symbol",children:e.ticker}),Object(E.jsx)("div",{className:"share",children:e.numOfShares>1?"".concat(e.numOfShares," shares"):"".concat(e.numOfShares," share")})]})]}),Object(E.jsxs)("div",{className:"intra-percent-wrapper",children:[Object(E.jsx)("div",{className:"price",children:c}),Object(E.jsxs)("div",{className:"percent ".concat(n),children:["% ",a]})]}),Object(E.jsxs)("div",{className:"price-percent-wrapper",children:[Object(E.jsxs)("div",{className:"price",children:["$ ",(c*e.numOfShares).toFixed(2)]}),Object(E.jsxs)("div",{className:"percent",children:[" % ",s]})]})]},e._id)}))})]})},se=function(e){var t=e.timeStamp,c=((new Date).getTime()/1e3).toFixed(0)-t,a=c/3600,s=(c%3600/60).toFixed(0);return a=(""+a).slice(0,1),Object(E.jsxs)("div",{className:"time",children:[a,"h ",s,"min ago"]})};var ne=function(e){var t=e.type,c=e.period,s=e.token,n=e.heading,r=Object(a.useState)(),i=Object(N.a)(r,2),o=i[0],l=i[1];return Object(a.useEffect)((function(){g.a.get("".concat(t).concat(c,"&token=").concat(s)).then((function(e){e.data.length=15,l(e.data)})).catch((function(e){return console.log(e)}))}),[]),Object(E.jsxs)("div",{id:"news",children:[Object(E.jsx)("div",{className:"news-heading",children:n}),o&&o.map((function(e){var t=e.headline,c=e.image,a=e.url,s=e.id,n=e.datetime,r=""===c?"https://www.ecpgr.cgiar.org/fileadmin/templates/ecpgr.org/Assets/images/No_Image_Available.jpg":c;return Object(E.jsxs)("article",{className:"news-piece",children:[Object(E.jsx)("p",{className:"headline",children:t}),Object(E.jsx)("img",{className:"news-img",src:r,alt:""}),Object(E.jsxs)("div",{className:"time_readmore-wrapper",children:[Object(E.jsx)("a",{href:a,className:"read-more",children:"Read more..."}),Object(E.jsx)(se,{timeStamp:n})]})]},s)}))]})},re=c(186),ie=c(176),oe=c(185),le=Object(S.a)((function(e){return{snack:{height:"45px"}}}));var de=function(e){var t=e.action,c=e.message,s=Object(a.useState)(!1),n=Object(N.a)(s,2),r=n[0],i=n[1],o=le(),l=function(e,t){"clickaway"!==t&&i(!1)};return Object(a.useEffect)((function(){setTimeout((function(){t&&i(!0),sessionStorage.removeItem("stockAction")}),500)}),[]),Object(E.jsx)("article",{children:Object(E.jsx)(re.a,{className:o.root,anchorOrigin:{vertical:"top",horizontal:"center"},open:r,autoHideDuration:1800,TransitionComponent:ie.a,onClose:l,children:Object(E.jsx)(oe.a,{className:o.snack,onClose:l,severity:"success",variant:"filled",children:c})})})},je=c(182),ue=c(177),be=c(181),he=c(179),Oe=c(180),me=c(178),pe=function(e){var t=e.openModal,c=Object(a.useState)(t),s=Object(N.a)(c,2),n=s[0],r=s[1],i=(I(),function(){Z.post("/auth/updateRewardAccept").then((function(e){console.log(e)})).catch((function(e){return console.error(e)})),r(!1)});return Object(E.jsx)("article",{children:Object(E.jsxs)(ue.a,{open:n,onClose:i,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(E.jsx)(me.a,{id:"alert-dialog-title",children:"Congrats!"}),Object(E.jsx)(he.a,{children:Object(E.jsx)(Oe.a,{id:"alert-dialog-description",children:"Start investing with $ 10.000 subscription reward!"})}),Object(E.jsx)(be.a,{children:Object(E.jsx)(je.a,{onClick:i,color:"primary",children:"Got it, Thanks!"})})]})})},fe=function(e){var t=e.show,c=Object(a.useState)(t),s=Object(N.a)(c,2),n=s[0],r=s[1],i=n?"show":"";console.log(i);return Object(E.jsxs)("div",{id:"did-search",className:"".concat(i),children:[Object(E.jsx)("div",{className:"message",children:"Search for your stock here!"}),Object(E.jsx)("div",{className:"arrow"}),Object(E.jsxs)("button",{onClick:function(){Z.post("/auth/updateDidSearch").then((function(e){r(!0)})).catch((function(e){return console.error(e)}))},className:"confirm-did-search",children:[Object(E.jsx)("i",{className:"fas fa-times"})," OK, Will do!"]})]})};var xe=function(){return Object(E.jsx)("div",{className:"loading",children:Object(E.jsxs)("div",{className:"lds-grid",children:[Object(E.jsx)("div",{}),Object(E.jsx)("div",{}),Object(E.jsx)("div",{}),Object(E.jsx)("div",{}),Object(E.jsx)("div",{}),Object(E.jsx)("div",{}),Object(E.jsx)("div",{}),Object(E.jsx)("div",{}),Object(E.jsx)("div",{})]})})},ve="c32dffiad3ieculvh350";var ge=Object(u.a)((function(e){localStorage.setItem("lastPath","/");var t=Object(a.useState)({}),c=Object(N.a)(t,2),s=c[0],n=c[1],r=Object(a.useState)(!0),i=Object(N.a)(r,2),o=i[0],l=i[1],d=Object(a.useState)(),u=Object(N.a)(d,2),b=u[0],h=u[1],O=Object(a.useState)(""),m=Object(N.a)(O,2),p=m[0],f=m[1],x=Object(j.f)();Object(a.useEffect)((function(){var e=Z.post("/auth/info"),t=Z.post("/stockApi/getUserPortfolio"),c=x.state;if(c){var a=c.action,s=c.numOfShares,r=c.ticker,i=c.price;h(a),f("".concat(a," ").concat(s," ").concat(r," at $").concat(i))}Promise.all([e,t]).then((function(e){var t=e[1].data,c=e[0].data;n({portfolios:t,userInfo:c}),l(!1)}))}),[]);var v=s.portfolios,g=s.userInfo;return o?Object(E.jsx)(xe,{}):Object(E.jsxs)("main",{id:"home",children:[Object(E.jsxs)("div",{id:"user-info_search-wrapper",children:[Object(E.jsx)(ee,{userInfo:g}),Object(E.jsx)(M,{})]}),Object(E.jsx)(ae,{userPortfolio:v,cash:g.cash}),Object(E.jsx)(ne,{token:ve,type:"https://finnhub.io/api/v1/news?category=general",period:"",heading:"Market News"}),Object(E.jsx)(de,{action:b,message:p}),Object(E.jsx)(pe,{openModal:!g.acceptedReward}),Object(E.jsx)(fe,{show:g.didSearch})]})})),Ne=c(87),ke=Object(S.a)((function(e){return{snack:{height:"45px"}}}));var ye=function(e){var t=e.watched,c=e.favorite,s=ke(),n=Object(a.useState)(!1),r=Object(N.a)(n,2),i=r[0],o=r[1],l=Object(a.useState)(""),d=Object(N.a)(l,2),j=d[0],u=d[1],b=function(e,t){"clickaway"!==t&&o(!1)};return Object(a.useEffect)((function(){c?(o(!0),u(t?"Added to Watchlist":"Removed from Watchlist")):o(!1)}),[t]),Object(E.jsx)("div",{children:Object(E.jsx)(re.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:i,autoHideDuration:1700,TransitionComponent:ie.a,onClose:b,children:Object(E.jsx)(oe.a,{className:s.snack,onClose:b,severity:"success",variant:"filled",children:j})})})};var we=function(e){var t=e.ticker,c=(e.userId,e.inWatchlist),s=(e.jwt,Object(a.useState)(!1)),n=Object(N.a)(s,2),r=n[0],i=n[1],o=Object(a.useState)(c),l=Object(N.a)(o,2),d=l[0],j=l[1];return Object(a.useEffect)((function(){!1!==r&&(Z.post("/stockApi/setFavorite",{ticker:t,status:!d}).then((function(e){i(!1)})).catch((function(e){console.error(e)})),j(!d))}),[r]),Object(E.jsxs)("div",{children:[Object(E.jsx)("div",{onClick:function(){i(!r)},className:"favorite-btn",children:d?Object(E.jsx)("i",{className:"fas favorite-star  fa-star"}):Object(E.jsx)("i",{className:"far fa-star"})}),Object(E.jsx)(ye,{watched:d,favorite:r})]})};var Se=function(e){var t=e.open,c=e.percent,s=e.symbol,n=e.userCash,r=e.tickerInfo,i=Object(a.useState)(!1),o=Object(N.a)(i,2),l=o[0],d=o[1],u=Object(a.useState)(""),b=Object(N.a)(u,2),h=b[0],O=b[1],m=Object(a.useState)(0),p=Object(N.a)(m,2),f=p[0],x=p[1],v=Object(a.useState)(!1),g=Object(N.a)(v,2),S=g[0],I=g[1],T=Object(a.useRef)(),_=C(),M=A(),R=P(),D=Object(j.g)();Object(a.useEffect)((function(){if(0!==f&&""!==h){var e={price:f,numOfShares:h,tickerInfo:r};Z.post("/stockApi/buyStock",e).then((function(e){D("/",{state:{action:"Bought",ticker:r.ticker,numOfShares:h,price:f}}),O("")})).catch((function(e){return console.error(e)}))}}),[f]);var L=c>0?"green":"red",$=c>0?Object(E.jsx)("i",{className:"fas fa-sort-up green"}):Object(E.jsx)("i",{className:"fas fa-sort-down red "}),B=Object(E.jsxs)("div",{className:_.paper,id:"buy-modal",children:[Object(E.jsxs)("div",{className:"ticker-info-wrapper",children:[Object(E.jsx)("div",{className:"ticker",children:s}),Object(E.jsxs)("div",{className:"price_percent_indicator-wrapper",children:[Object(E.jsxs)("div",{className:"price",children:["$ ",t]}),Object(E.jsx)("div",{className:"indicator",children:$}),Object(E.jsxs)("div",{className:"percent ".concat(L),children:[c,"%"]})]})]}),Object(E.jsxs)("div",{className:"input-wrapper",children:[Object(E.jsx)("p",{className:M.label,children:"Number of shares"}),Object(E.jsx)(F.a,{InputProps:{className:M.input,inputProps:{min:0}},className:M.root,onChange:function(e){O(e.target.value),function(e){e*t>n?(I(!0),T.current.disabled=!0,T.current.style.backgroundColor="#e9ecef",T.current.style.color="#6c757d"):(I(!1),T.current.disabled=!1,T.current.style.color="white",T.current.style.backgroundColor="green")}(e.target.value)},value:h,autoComplete:"off",type:"number",autoFocus:!0,variant:"outlined"}),Object(E.jsx)("button",{onClick:function(){x(t)},className:"buy-btn",id:"buy-btn-modal",ref:T,children:"BUY"}),S?Object(E.jsx)(oe.a,{className:R.root,severity:"error",children:"work harder then you can buy more share, maybe!"}):Object(E.jsx)("div",{className:"exceed-warning"})]})]});return Object(E.jsxs)("div",{id:"buy-wrapper",children:[Object(E.jsx)("button",{type:"button",id:"buy-btn-disable",className:"buy-btn",data:"buy",onClick:function(){d(!0)},children:"BUY"}),Object(E.jsx)(k.a,{open:l,onClose:function(){d(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",closeAfterTransition:!0,BackdropComponent:y.a,BackdropProps:{timeout:250},children:Object(E.jsx)(w.a,{in:l,children:B})})]})};var Ce=function(e){var t=e.open,c=e.percent,s=e.symbol,n=e.userPosition,r=e.tickerInfo,i=Object(a.useState)(),o=Object(N.a)(i,2),l=o[0],d=o[1],u=Object(a.useState)(""),b=Object(N.a)(u,2),h=b[0],O=b[1],m=Object(a.useState)(!1),p=Object(N.a)(m,2),f=p[0],x=p[1],v=Object(a.useState)(!1),g=Object(N.a)(v,2),S=g[0],I=g[1],T=C(),_=A(),M=P(),R=Object(a.useRef)(),D=Object(a.useRef)(),L=Object(j.g)();Object(a.useEffect)((function(){if((n.noPosition||0===n.numOfShares)&&(R.current.disabled=!0,R.current.style.backgroundColor="grey"),0!==l&&""!==h){var e={price:l,numOfShares:h,tickerInfo:r};Z.post("/stockApi/sellStock",e).then((function(e){L("/",{state:{action:"Sold",ticker:r.ticker,numOfShares:h,price:l}}),O("")})).catch((function(e){return console.error(e)}))}}),[l]);var $=c>0?"green":"red",B=c>0?Object(E.jsx)("i",{className:"fas fa-sort-up green"}):Object(E.jsx)("i",{className:"fas fa-sort-down red "}),W=Object(E.jsxs)("div",{className:T.paper,id:"sell-modal",children:[Object(E.jsxs)("div",{className:"ticker-info-wrapper",children:[Object(E.jsx)("div",{className:"ticker",children:s}),Object(E.jsxs)("div",{className:"price_percent_indicator-wrapper",children:[Object(E.jsxs)("div",{className:"price",children:["$ ",t]}),Object(E.jsx)("div",{className:"indicator",children:B}),Object(E.jsxs)("div",{className:"percent ".concat($),children:[c,"%"]})]})]}),Object(E.jsxs)("div",{className:"input-wrapper",children:[Object(E.jsx)("p",{className:_.label,children:"Number of shares"}),Object(E.jsx)(F.a,{InputProps:{className:_.input,inputProps:{min:0}},className:_.root,onChange:function(e){O(e.target.value),e.target.value>n.numOfShares?(I(!0),D.current.disabled=!0,D.current.style.backgroundColor="#e9ecef",D.current.style.color="#6c757d"):(I(!1),D.current.disabled=!1,D.current.style.backgroundColor="red",D.current.style.color="white")},value:h,min:"0",autoComplete:"off",type:"number",autoFocus:!0,variant:"outlined"}),Object(E.jsx)("button",{onClick:function(){d(t)},className:"sell-btn",id:"sell-btn-modal",ref:D,children:"SELL"}),S?Object(E.jsx)(oe.a,{className:M.root,severity:"error",children:"you can't sell what you dont own!"}):Object(E.jsx)("div",{className:"exceed-warning"})]})]});return Object(E.jsxs)("div",{id:"sell-wrapper",children:[Object(E.jsx)("button",{type:"button",ref:R,className:"sell-btn",data:"sell",onClick:function(){x(!0)},children:"SELL"}),Object(E.jsx)(k.a,{open:f,onClose:function(){x(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",closeAfterTransition:!0,BackdropComponent:y.a,BackdropProps:{timeout:250},children:Object(E.jsx)(w.a,{in:f,children:W})})]})};var Ie=function(e){var t=e.open,c=e.color,a=e.indicator,s=e.percent;return Object(E.jsxs)("div",{className:"price-percent-wrapper",children:[Object(E.jsxs)("div",{className:"price",children:["$ ",t]}),Object(E.jsxs)("div",{className:"percent_indicator-wrapper",children:[Object(E.jsxs)("div",{className:"".concat(c," percent"),children:[s,"%"]}),Object(E.jsx)("div",{className:"indicator",children:a})]})]})};var Pe=function(e){var t=e.intraday,c=e.symbol,s=e.userCash,n=e.userPosition,r=e.tickerInfo,i=e.history,o=Object(a.useState)(0),l=Object(N.a)(o,2),d=l[0],j=l[1];Object(a.useEffect)((function(){var e=setInterval((function(){var e=Math.floor(50*Math.random());j(e)}),1500);return function(){clearInterval(e)}}),[]);var u=t[d].open.toFixed(1),b=t[d].close.toFixed(1),h=((u-b)/b*100).toFixed(2),O=(h=h<=0?-Math.random().toFixed(2):h)>0?"green":"red",m=h>0?Object(E.jsx)("i",{className:"fas fa-sort-up green"}):Object(E.jsx)("i",{className:"fas fa-sort-down red "});return Object(E.jsxs)("div",{className:"price_btn-wrapper",children:[Object(E.jsx)(Ie,{open:u,percent:h,color:O,indicator:m}),Object(E.jsxs)("div",{className:"btn-wrapper",children:[Object(E.jsx)(Se,{open:u,symbol:c,userCash:s,tickerInfo:r,history:i,percent:h}),Object(E.jsx)(Ce,{open:u,symbol:c,userPosition:n,tickerInfo:r,history:i,percent:h})]})]})},Ae=c(52),Fe=c.n(Ae);var Ee=function(e){var t=e.tickerIntra,c=e.ticker,s=Object(a.useState)(250),n=Object(N.a)(s,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){var e=t.map((function(e){return[1e3*e.date,e.close.toFixed(2)]}));e.length=r;var a=e[0][1],s=e[e.length-1][1],n=parseInt(a)-parseInt(s)<0?"#f94144":"#38b000",i=function(e,t){return{series:[e],chart:{id:"stockChart",type:"area",stacked:!1,height:350,zoom:{type:"x",enabled:!0,autoScaleYaxis:!0},animations:{enabled:!0,easing:"easeout",speed:500},toolbar:{show:!0,autoSelected:"zoom",zoom:!1,zoomin:!1,zoomout:!1,pan:!0,tools:{download:!1,customIcons:[{icon:'<i class="fas fa-adjust"></i>',index:2,title:"tooltip of the icon",class:"custom-icon",click:function(e,t,c){}}]}}},dataLabels:{enabled:!1},stroke:{show:!0,curve:"smooth",lineCap:"butt",colors:[t],width:2,dashArray:0},markers:{size:0},title:{text:"1 year",align:"left"},fill:{type:"gradient",gradient:{shadeIntensity:1,inverseColors:!1,opacityFrom:.1,opacityTo:0,stops:[0,90,100]}},yaxis:{labels:{formatter:function(e){return e.toFixed(0)}},title:{text:"Price"}},xaxis:{type:"datetime"},tooltip:{shared:!0,y:{formatter:function(e){return e.toFixed(0)}}}}}({name:c,data:e},n),o=new Fe.a(document.querySelector("#line-chart"),i);250===r?o.render():(Fe.a.exec("stockChart","updateOptions",{stroke:{colors:[n]}}),Fe.a.exec("stockChart","updateSeries",[{name:c,data:e}]))}),[r]),Object(E.jsxs)("div",{id:"chart",children:[Object(E.jsx)("div",{id:"line-chart"}),Object(E.jsxs)("div",{id:"chart-period",children:[Object(E.jsx)("button",{onClick:function(){i(7)},className:"period-btn",children:"1W"}),Object(E.jsx)("button",{onClick:function(){i(20)},className:"period-btn",children:"1M"}),Object(E.jsx)("button",{onClick:function(){i(75)},className:"period-btn",children:"3M"}),Object(E.jsx)("button",{onClick:function(){i(130)},className:"period-btn",children:"6M"}),Object(E.jsx)("button",{onClick:function(){i(249)},className:"period-btn",children:"1Y"})]})]})};var Te=function(e){var t=e.ticker,c=Object(a.useState)({}),s=Object(N.a)(c,2),n=s[0],r=s[1];if(Object(a.useEffect)((function(){var e={params:{symbol:t,region:"US"},headers:{"x-rapidapi-host":"apidojo-yahoo-finance-v1.p.rapidapi.com","x-rapidapi-key":"619a93f73bmsh2c63b3d89ee00a5p13dc29jsn941d23998c56"}};g.a.get("https://apidojo-yahoo-finance-v1.p.rapidapi.com/stock/v2/get-financials",e).then((function(e){r(e),console.log(e)})).catch((function(e){return console.error(e)}))}),[]),200===n.status){var i=n.data,o=i.summaryDetail,l=i.timeSeries;return Object(E.jsxs)("div",{id:"financials",children:[Object(E.jsx)("div",{className:"heading",children:"key stats"}),Object(E.jsxs)("div",{className:"stats",children:[Object(E.jsxs)("div",{className:"stats-line",children:[Object(E.jsx)("span",{className:"key",children:"P/E Ratio"}),Object(E.jsx)("span",{className:"value",children:o.trailingPE.fmt})]}),Object(E.jsxs)("div",{className:"stats-line",children:[Object(E.jsx)("span",{className:"key",children:"All time high"}),Object(E.jsxs)("span",{className:"value",children:["$ ",o.fiftyTwoWeekHigh.fmt]})]}),Object(E.jsxs)("div",{className:"stats-line",children:[Object(E.jsx)("span",{className:"key",children:"Trading volume"}),Object(E.jsx)("span",{className:"value",children:o.volume.longFmt})]}),Object(E.jsxs)("div",{className:"stats-line",children:[Object(E.jsx)("span",{className:"key",children:"200 DMA"}),Object(E.jsxs)("span",{className:"value",children:["$ ",o.twoHundredDayAverage.fmt]})]}),Object(E.jsxs)("div",{className:"stats-line",children:[Object(E.jsx)("span",{className:"key",children:"50 DMA"}),Object(E.jsxs)("span",{className:"value",children:["$ ",o.fiftyDayAverage.fmt]})]}),Object(E.jsxs)("div",{className:"stats-line",children:[Object(E.jsx)("span",{className:"key",children:"Market Cap"}),Object(E.jsxs)("span",{className:"value",children:["$ ",o.marketCap.longFmt]})]}),Object(E.jsxs)("div",{className:"stats-line",children:[Object(E.jsx)("span",{className:"key",children:"Shares Outstanding"}),Object(E.jsx)("span",{className:"value",children:l.annualBasicAverageShares[3].reportedValue.raw.toLocaleString()})]}),Object(E.jsxs)("div",{className:"stats-line",children:[Object(E.jsx)("span",{className:"key",children:"Total Revenue (TTM)"}),Object(E.jsxs)("span",{className:"value",children:["$ ",l.trailingTotalRevenue[0].reportedValue.raw.toLocaleString()]})]}),Object(E.jsxs)("div",{className:"stats-line",children:[Object(E.jsx)("span",{className:"key",children:"Total Income (TTM)"}),Object(E.jsxs)("span",{className:"value",children:["$ ",l.trailingNetIncome[0].reportedValue.raw.toLocaleString()]})]})]})]})}return Object(E.jsx)("div",{className:"asa"})};var _e=Object(u.a)((function(e){var t=localStorage.getItem("lastPath"),c=Object(j.h)().ticker,s=Object(a.useState)({}),n=Object(N.a)(s,2),r=n[0],i=n[1],o="https://finnhub.io/api/v1/company-news?symbol=".concat(c);Object(a.useEffect)((function(){var e=Z.get("/stockApi/getIntraday/"+c),t=Z.post("/stockApi/getUserPosition/",{ticker:c});Promise.all([e,t]).then((function(e){var t=Object(Ne.a)(e[0].data.intraday),a={ticker:e[0].data.ticker,logo:e[0].data.logo,companyName:e[0].data.companyName},s=e[1].data._doc,n=e[1].data.userCash,r=!!e[1].data.watchlist.includes(c);i({tickerInfo:a,tickerIntra:t,userPosition:s,userCash:n,inWatchlist:r})})).catch((function(e){return console.error(e)}))}),[]);var l=r.tickerInfo,d=r.tickerIntra,u=r.userPosition,b=r.userCash,h=r.inWatchlist;if(d&&u){var O=l.ticker,m=u.numOfShares>1?"shares":"share";return Object(E.jsxs)("div",{id:"stock-details",children:[Object(E.jsxs)("div",{className:"top-wrapper",children:[Object(E.jsx)("a",{href:t,className:"back-btn",children:Object(E.jsx)("i",{className:"fas fa-2x fa-chevron-circle-left"})}),Object(E.jsx)("div",{className:"ticker",children:O}),Object(E.jsx)(we,{ticker:O,inWatchlist:h})]}),Object(E.jsx)(Pe,{intraday:d,symbol:O,userCash:b,tickerInfo:l,userPosition:u}),Object(E.jsxs)("div",{className:"user-position",children:[Object(E.jsxs)("div",{children:["Your Position: ",u.numOfShares?u.numOfShares:"0"," ",m]}),Object(E.jsxs)("div",{children:["Average Price: $ ",u.avgPrice?u.avgPrice.toFixed(2):"0"]})]}),Object(E.jsx)(Ee,{tickerIntra:d,ticker:l.ticker}),Object(E.jsx)(Te,{ticker:l.ticker}),Object(E.jsx)(ne,{token:ve,type:o,period:Me(),heading:"News related to ".concat(c)})]})}return Object(E.jsx)(xe,{})})),Me=function(){var e=new Date((new Date).getTime()).toLocaleDateString().split("/"),t=new Date((new Date).getTime()-2592e5).toLocaleDateString().split("/");return"&from".concat(t[2],"-").concat(t[0],"-").concat(t[1],"&to").concat(e[2],"-").concat(e[0],"-").concat(e[1])};var Re=function(e){var t=e.watchlist,c=Object(a.useState)(0),s=Object(N.a)(c,2),n=s[0],r=s[1];return Object(a.useEffect)((function(){var e=setInterval((function(){var e=Math.floor(99*Math.random());r(e)}),1500);return function(){clearInterval(e)}}),[]),Object(E.jsx)("div",{id:"list-wrapper",children:t.map((function(e){var t=e.intraday[n].open.toFixed(1),c=e.intraday[n].close.toFixed(1),a=((t-c)/c*100).toFixed(2),s=(a=a<=0?-Math.random().toFixed(2):a)>0?"green":"red";return Object(E.jsxs)(d.b,{to:"/viewstock/".concat(e.ticker),className:"stock-info",children:[Object(E.jsxs)("div",{className:"ticker-logo-wrapper",children:[Object(E.jsx)("img",{className:"logo",src:e.logo,alt:""}),Object(E.jsx)("div",{className:"ticker",children:e.ticker})]}),Object(E.jsxs)("div",{className:"price-percent-wrapper",children:[Object(E.jsxs)("div",{className:"price",children:["$ ",t]}),Object(E.jsxs)("div",{className:"".concat(s," percent"),children:[a," %"]})]})]},e._id)}))})};var De=Object(u.a)((function(e){e.cookies,localStorage.setItem("lastPath","/watchlist");var t=Object(a.useState)([]),c=Object(N.a)(t,2),s=c[0],n=c[1];return Object(a.useEffect)((function(){Z.get("/stockApi/getWatchlist").then((function(e){n(e.data)})).catch((function(e){return console.error(e)}))}),[]),s?Object(E.jsxs)("div",{id:"watchlist",children:[Object(E.jsx)("div",{className:"heading",children:"Your Watchlist"}),s.length>0?Object(E.jsx)(Re,{watchlist:s}):Object(E.jsx)(ce,{component:"Watchlist"}),Object(E.jsx)(ne,{token:ve,type:"https://finnhub.io/api/v1/news?category=general",period:"",heading:"Market News"})]}):Object(E.jsx)(xe,{})})),Le=["Hi","Hello","Yo","Wassup","Hola","Salut","Ch\xe0o"],$e=Object(u.a)((function(e){var t;localStorage.setItem("lastPath","/account");var c=Object(a.useState)({}),s=Object(N.a)(c,2),n=s[0],r=s[1],i=Object(a.useState)(0),o=Object(N.a)(i,2),l=o[0],u=o[1],b=Object(j.g)();return Object(a.useEffect)((function(){var e=Z.post("/stockApi/getUserPortfolio"),t=Z.post("/auth/info");Promise.all([e,t]).then((function(e){var t=e[0].data,c=e[1].data,a=0;t.forEach((function(e){a+=e.numOfShares*e.tickerValue[0].intraday[0].high}));var s={join:new Date(null===c||void 0===c?void 0:c.createdAt).toLocaleDateString(),total:a,username:null===c||void 0===c?void 0:c.username,picture:null===c||void 0===c?void 0:c.picture};u(Math.ceil(6*Math.random())),r(s)}))}),[]),Object(E.jsxs)("div",{id:"account-settings",children:[Object(E.jsxs)("div",{id:"info-wrapper",children:[Object(E.jsx)("img",{src:n.picture,alt:""}),Object(E.jsxs)("div",{className:"username",children:[Le[l],", ",null===n||void 0===n?void 0:n.username,"!"]})]}),Object(E.jsx)("div",{id:"link-wrapper",children:Object(E.jsxs)(d.b,{className:"link",to:"/transactions",children:[Object(E.jsx)("i",{className:"far fa-list-alt"}),"Transactions"]})}),Object(E.jsxs)("div",{id:"user-info",children:[Object(E.jsxs)("div",{className:"join",children:["Joined on: ",null===n||void 0===n?void 0:n.join]}),Object(E.jsxs)("div",{className:"return",children:["Gain: ",null===n||void 0===n||null===(t=n.total)||void 0===t?void 0:t.toFixed(2)]})]}),Object(E.jsx)("div",{id:"signout",children:Object(E.jsx)("button",{onClick:function(){return e.cookies.set("jwt",""),b("/login")},children:"Sign Out"})})]})})),Be=c(20),We=(c(88),function(e){Object(o.a)(c,e);var t=Object(l.a)(c);function c(){return Object(r.a)(this,c),t.apply(this,arguments)}return Object(i.a)(c,[{key:"render",value:function(){return Object(E.jsx)("div",{className:"App",children:Object(E.jsxs)(d.a,{children:[Object(E.jsxs)(j.d,{children:[Object(E.jsx)(j.b,{exact:!0,path:"/login",element:Object(E.jsx)(B,{})}),Object(E.jsx)(j.b,{exact:!0,path:"/signup",element:Object(E.jsx)(G,{})}),Object(E.jsx)(j.b,{path:"/account",isAuthenticated:!0,element:Object(E.jsx)($e,{})}),Object(E.jsx)(j.b,{path:"/transactions",isAuthenticated:!0,element:Object(E.jsx)(X,{})}),Object(E.jsx)(j.b,{path:"/viewstock/:ticker",isAuthenticated:!0,element:Object(E.jsx)(_e,{})}),Object(E.jsx)(j.b,{path:"/watchlist",isAuthenticated:!0,element:Object(E.jsx)(De,{})}),Object(E.jsx)(j.b,{path:"/",isAuthenticated:!0,element:Object(E.jsx)(ge,{})})]}),Object(E.jsx)(L,{})]})})}}]),c}(a.Component)),Ge=Object(u.a)(We),ze=c(183),He=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,187)).then((function(t){var c=t.getCLS,a=t.getFID,s=t.getFCP,n=t.getLCP,r=t.getTTFB;c(e),a(e),s(e),n(e),r(e)}))},Ue=c(28),Ve=c(86),Ye={user:{},message:{}},qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(Be.a)(Object(Be.a)({},e),{},{user:t.user});case m:return Object(Be.a)(Object(Be.a)({},e),{},{message:t.message});case p:return Object(Be.a)(Object(Be.a)({},e),{},{user:t.userInfo});default:return e}},Je={},Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(Be.a)(Object(Be.a)({},e),{},{userPortfo:t.userPortfo.data.portfolios,portfoIntra:t.userPortfo.data.portfoIntra});case x:return Object(Be.a)(Object(Be.a)({},e),{},{portfoIntra:t.portfoIntra});default:return e}},Qe=Object(Ue.c)({userReducer:qe,stockReducer:Ke}),Ze=[Ve.a],Xe=Object(Ue.e)(Qe,{},Object(Ue.d)(Ue.a.apply(void 0,Ze)));n.a.render(Object(E.jsx)(ze.a,{children:Object(E.jsx)(h.a,{store:Xe,children:Object(E.jsx)(Ge,{})})}),document.getElementById("root")),He()}},[[132,1,2]]]);
//# sourceMappingURL=main.147bd0b9.chunk.js.map